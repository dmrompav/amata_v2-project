"use strict";function _classCallCheck(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,n){for(var o=0;o<n.length;o++){var t=n[o];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}function _createClass(e,n,o){return n&&_defineProperties(e.prototype,n),o&&_defineProperties(e,o),e}for(var maxSize,minSize,body=document.querySelector(".body"),canvas=document.getElementById("canvas"),wrapper=document.querySelector(".wrapper"),centrlBtn=document.querySelector(".central-btn"),rotator=document.querySelector(".rotator"),menu=document.querySelector(".menu"),circles=document.querySelector(".menu__circles"),but=document.querySelector(".menu__large-btn"),butNames=document.querySelector(".menu__names"),butLogos=document.querySelector(".menu__logos"),nav=document.querySelector(".menu__nav"),ul=document.querySelector(".menu__ul"),li=document.querySelectorAll(".menu__li"),liBut=document.querySelectorAll(".menu-li__button"),main=document.querySelector(".main"),tapfield=document.querySelector(".main__tapfield"),popup=document.querySelectorAll(".main__popup"),lazy=[],i=0;i<popup.length;i++)lazy[i]=popup[i].querySelectorAll(".popup__lazy");function Resize(){window.innerWidth<window.innerHeight?(maxSize=window.innerHeight,minSize=window.innerWidth):(maxSize=window.innerWidth,minSize=window.innerHeight),canvas.width=maxSize,canvas.height=maxSize,minSize<650?(li.forEach((function(e){e.classList.add("mobile")})),liBut.forEach((function(e){e.classList.add("mobile")}))):(li.forEach((function(e){e.classList.remove("mobile")})),liBut.forEach((function(e){e.classList.remove("mobile")})))}window.addEventListener("resize",Resize,!1),Resize(),function(){var e,n,o,t,i={dotsQuantity:40,dotMinRad:1,dotMaxRad:20,sphereRad:300,bigDotRad:35,mouseSize:120,massFactor:.003,firstMouseColor:"rgba(256, 0, 0, 0.3)",secondMouseColor:"rgba(256, 256, 256, 0.6)",firstColor:"rgba(256, 256, 256, 0.1)",secondColor:"rgba(256, 256, 256, 0.4)",smooth:.85},s=2*Math.PI,a=canvas.getContext("2d"),r=function(){function e(n){var t,s;_classCallCheck(this,e),this.pos={x:o.x,y:o.y},this.vel={x:0,y:0},this.rad=n||(t=i.dotMinRad,s=i.dotMaxRad,Math.random()*(s-t)+t),this.mass=this.rad*i.massFactor,this.color=i.defColor}return _createClass(e,[{key:"drawMouse",value:function(e,n){this.pos.x=e||this.pos.x+this.vel.x,this.pos.y=n||this.pos.y+this.vel.y,d(this.pos.x,this.pos.y,this.rad,!0,i.firstMouseColor),d(this.pos.x,this.pos.y,this.rad,!1,i.secondMouseColor)}},{key:"draw",value:function(e,n){this.pos.x=e||this.pos.x+this.vel.x,this.pos.y=n||this.pos.y+this.vel.y,d(this.pos.x,this.pos.y,this.rad,!0,i.firstColor),d(this.pos.x,this.pos.y,this.rad,!1,i.secondColor)}}]),e}();function d(e,n,o,t,i){a.fillStyle=a.strokeStyle=i,a.beginPath(),a.arc(e,n,o,0,s),a.closePath(),t?a.fill():a.stroke()}e=canvas.width=maxSize,n=canvas.height=maxSize,o={x:e/2,y:n/2,down:!1},(t=[]).push(new r(i.bigDotRad)),function s(){a.clearRect(0,0,e,n),t.length<i.dotsQuantity&&t.push(new r),function(){for(var e=1;e<t.length;e++){for(var n={x:0,y:0},s=0;s<t.length;s++)if(e!=s){var a=[t[e],t[s]],r=a[0],d=a[1],c={x:d.pos.x-r.pos.x,y:d.pos.y-r.pos.y},u=Math.sqrt(c.x*c.x+c.y*c.y)||1,l=(u-i.sphereRad)/u*d.mass;if(0==s){var p=i.mouseSize/u;r.color="rgba(250, 10, 30, ".concat(p,")"),l=u<i.mouseSize?(u-i.mouseSize)*d.mass:r.mass}n.x+=c.x*l,n.y+=c.y*l}t[e].vel.x=t[e].vel.x*i.smooth+n.x*t[e].mass,t[e].vel.y=t[e].vel.y*i.smooth+n.y*t[e].mass}t.map((function(e){return e==t[0]?e.drawMouse(o.x,o.y):e.draw()}))}(),window.requestAnimationFrame(s)}(),document.addEventListener("mousemove",(function(e){var n=[e.clientX,e.clientY];o.x=n[0],o.y=n[1]})),document.addEventListener("mousedown",(function(){return i.sphereRad=100})),document.addEventListener("mouseup",(function(){return i.sphereRad=300}))}(),document.addEventListener("mousemove",(function(e){var n=-(e.clientX-window.innerWidth/2)/window.innerWidth*30-7,o=(e.clientY-window.innerHeight/2)/window.innerHeight*30+7;rotator.style.transform="rotateX("+o+"deg) rotateY("+n+"deg)"}),!1),document.addEventListener("touchmove",(function(e){var n=-(e.changedTouches[0].pageX-window.innerWidth/2)/window.innerWidth*30-7,o=(e.changedTouches[0].pageY-window.innerHeight/2)/window.innerHeight*30+7;rotator.style.transform="rotateX("+o+"deg) rotateY("+n+"deg)",console.log(e.changedTouches[0].pageX)}),!1),centrlBtn.addEventListener("mouseover",(function(){butNames.classList.add("menu__names--hover")}),!1),centrlBtn.addEventListener("mouseout",(function(){butNames.classList.remove("menu__names--hover")}),!1);var indexOfPopup,isOpened=!1;function centrlBtnClick(){isOpened?(but.classList.remove("menu__large-btn--opened"),butNames.classList.remove("menu__names--opened"),butLogos.classList.remove("menu__logos--opened"),circles.classList.remove("menu__circles--opened"),nav.classList.remove("menu__nav--opened"),ul.classList.remove("menu__ul--opened"),li.forEach((function(e){e.classList.remove("menu__li--opened")})),liBut.forEach((function(e){e.classList.remove("menu-li__button--opened")}))):(but.classList.add("menu__large-btn--opened"),butNames.classList.add("menu__names--opened"),butLogos.classList.add("menu__logos--opened"),circles.classList.add("menu__circles--opened"),nav.classList.add("menu__nav--opened"),ul.classList.add("menu__ul--opened"),li.forEach((function(e){e.classList.add("menu__li--opened")})),liBut.forEach((function(e){e.classList.add("menu-li__button--opened")}))),isOpened=!isOpened}function OpenPopUp(){var e=this;liBut.forEach((function(n,o){if(n===e){indexOfPopup=o,menu.classList.add("menu--hidden"),tapfield.classList.add("main__tapfield--opened"),body.classList.add("body--popup-opened"),popup[indexOfPopup].classList.add("main__popup--opened");var t=document.createElement("div");popup[indexOfPopup].prepend(t),t.classList.add("main__close"),t.innerHTML="X",t.addEventListener("click",ClosePopUp,!1),LazyPopup(indexOfPopup)}}))}function LazyPopup(e){var n=0,o=setInterval((function(){lazy[e][n].classList.add("popup__lazy--opened"),++n===lazy[e].length&&clearInterval(o)}),100)}function ClosePopUp(){menu.classList.remove("menu--hidden"),tapfield.classList.remove("main__tapfield--opened"),body.classList.remove("body--popup-opened"),popup[indexOfPopup].classList.remove("main__popup--opened"),popup[indexOfPopup].querySelector(".main__close").remove(),lazy[indexOfPopup].forEach((function(e){e.classList.remove("popup__lazy--opened")}))}centrlBtn.addEventListener("click",centrlBtnClick,!1),but.addEventListener("click",centrlBtnClick,!1),liBut.forEach((function(e){e.addEventListener("click",OpenPopUp,!1)})),tapfield.addEventListener("click",ClosePopUp,!1);