"use strict";function _classCallCheck(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,n){for(var t=0;t<n.length;t++){var o=n[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function _createClass(e,n,t){return n&&_defineProperties(e.prototype,n),t&&_defineProperties(e,t),e}for(var maxSize,minSize,body=document.querySelector(".body"),canvas=document.getElementById("canvas"),wrapper=document.querySelector(".wrapper"),centrlBtn=document.querySelector(".central-btn"),rotator=document.querySelector(".rotator"),menu=document.querySelector(".menu"),circles=document.querySelector(".menu__circles"),but=document.querySelector(".menu__large-btn"),butNames=document.querySelector(".menu__names"),butLogos=document.querySelector(".menu__logos"),nav=document.querySelector(".menu__nav"),ul=document.querySelector(".menu__ul"),li=document.querySelectorAll(".menu__li"),liBut=document.querySelectorAll(".menu-li__button"),main=document.querySelector(".main"),tapfield=document.querySelector(".main__tapfield"),popup=document.querySelectorAll(".main__popup"),lazy=[],i=0;i<popup.length;i++)lazy[i]=popup[i].querySelectorAll(".popup__lazy");function Resize(){window.innerWidth<window.innerHeight?(maxSize=window.innerHeight,minSize=window.innerWidth):(maxSize=window.innerWidth,minSize=window.innerHeight),canvas.width=2*maxSize,canvas.height=2*maxSize}document.addEventListener("resize",Resize,!1),Resize(),function(){var e,n,t,o,s={dotsQuantity:40,dotMinRad:1,dotMaxRad:20,sphereRad:300,bigDotRad:35,mouseSize:120,massFactor:.003,firstMouseColor:"rgba(256, 0, 0, 0.3)",secondMouseColor:"rgba(256, 256, 256, 0.6)",firstColor:"rgba(256, 256, 256, 0.1)",secondColor:"rgba(256, 256, 256, 0.4)",smooth:.85},i=2*Math.PI,a=canvas.getContext("2d"),r=function(){function e(n){var o,i;_classCallCheck(this,e),this.pos={x:t.x,y:t.y},this.vel={x:0,y:0},this.rad=n||(o=s.dotMinRad,i=s.dotMaxRad,Math.random()*(i-o)+o),this.mass=this.rad*s.massFactor,this.color=s.defColor}return _createClass(e,[{key:"drawMouse",value:function(e,n){this.pos.x=e||this.pos.x+this.vel.x,this.pos.y=n||this.pos.y+this.vel.y,d(this.pos.x,this.pos.y,this.rad,!0,s.firstMouseColor),d(this.pos.x,this.pos.y,this.rad,!1,s.secondMouseColor)}},{key:"draw",value:function(e,n){this.pos.x=e||this.pos.x+this.vel.x,this.pos.y=n||this.pos.y+this.vel.y,d(this.pos.x,this.pos.y,this.rad,!0,s.firstColor),d(this.pos.x,this.pos.y,this.rad,!1,s.secondColor)}}]),e}();function d(e,n,t,o,s){a.fillStyle=a.strokeStyle=s,a.beginPath(),a.arc(e,n,t,0,i),a.closePath(),o?a.fill():a.stroke()}e=canvas.width=2*maxSize,n=canvas.height=2*maxSize,t={x:e/2,y:n/2,down:!1},(o=[]).push(new r(s.bigDotRad)),function i(){a.clearRect(0,0,e,n),o.length<s.dotsQuantity&&o.push(new r),function(){for(var e=1;e<o.length;e++){for(var n={x:0,y:0},i=0;i<o.length;i++)if(e!=i){var a=[o[e],o[i]],r=a[0],d=a[1],u={x:d.pos.x-r.pos.x,y:d.pos.y-r.pos.y},l=Math.sqrt(u.x*u.x+u.y*u.y)||1,c=(l-s.sphereRad)/l*d.mass;if(0==i){var p=s.mouseSize/l;r.color="rgba(250, 10, 30, ".concat(p,")"),c=l<s.mouseSize?(l-s.mouseSize)*d.mass:r.mass}n.x+=u.x*c,n.y+=u.y*c}o[e].vel.x=o[e].vel.x*s.smooth+n.x*o[e].mass,o[e].vel.y=o[e].vel.y*s.smooth+n.y*o[e].mass}o.map((function(e){return e==o[0]?e.drawMouse(t.x,t.y):e.draw()}))}(),window.requestAnimationFrame(i)}(),document.addEventListener("mousemove",(function(e){var n=[e.clientX,e.clientY];t.x=n[0],t.y=n[1]})),document.addEventListener("mousedown",(function(){return s.sphereRad=100})),document.addEventListener("mouseup",(function(){return s.sphereRad=300}))}(),document.addEventListener("mousemove",(function(e){var n=-(e.clientX-window.innerWidth/2)/window.innerWidth*30-7,t=(e.clientY-window.innerHeight/2)/window.innerHeight*30+7;rotator.style.transform="rotateX("+t+"deg) rotateY("+n+"deg)"}),!1),centrlBtn.addEventListener("mouseover",(function(){butNames.classList.add("menu__names--hover")}),!1),centrlBtn.addEventListener("mouseout",(function(){butNames.classList.remove("menu__names--hover")}),!1);var indexOfPopup,isOpened=!1;function centrlBtnClick(){isOpened?(but.classList.remove("menu__large-btn--opened"),butNames.classList.remove("menu__names--opened"),butLogos.classList.remove("menu__logos--opened"),circles.classList.remove("menu__circles--opened"),nav.classList.remove("menu__nav--opened"),ul.classList.remove("menu__ul--opened"),li.forEach((function(e){e.classList.remove("menu__li--opened")})),liBut.forEach((function(e){e.classList.remove("menu-li__button--opened")}))):(but.classList.add("menu__large-btn--opened"),butNames.classList.add("menu__names--opened"),butLogos.classList.add("menu__logos--opened"),circles.classList.add("menu__circles--opened"),nav.classList.add("menu__nav--opened"),ul.classList.add("menu__ul--opened"),li.forEach((function(e){e.classList.add("menu__li--opened")})),liBut.forEach((function(e){e.classList.add("menu-li__button--opened")}))),isOpened=!isOpened}function OpenPopUp(){var e=this;liBut.forEach((function(n,t){if(n===e){indexOfPopup=t,menu.classList.add("menu--hidden"),tapfield.classList.add("main__tapfield--opened"),body.classList.add("body--popup-opened"),popup[indexOfPopup].classList.add("main__popup--opened");var o=document.createElement("div");popup[indexOfPopup].prepend(o),o.classList.add("main__close"),o.innerHTML="X",o.addEventListener("click",ClosePopUp,!1),LazyPopup(indexOfPopup)}}))}function LazyPopup(e){var n=0,t=setInterval((function(){lazy[e][n].classList.add("popup__lazy--opened"),++n===lazy[e].length&&clearInterval(t)}),100)}function ClosePopUp(){menu.classList.remove("menu--hidden"),tapfield.classList.remove("main__tapfield--opened"),body.classList.remove("body--popup-opened"),popup[indexOfPopup].classList.remove("main__popup--opened"),popup[indexOfPopup].querySelector(".main__close").remove(),lazy[indexOfPopup].forEach((function(e){e.classList.remove("popup__lazy--opened")}))}centrlBtn.addEventListener("click",centrlBtnClick,!1),but.addEventListener("click",centrlBtnClick,!1),liBut.forEach((function(e){e.addEventListener("click",OpenPopUp,!1)})),tapfield.addEventListener("click",ClosePopUp,!1);