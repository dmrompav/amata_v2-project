"use strict";function _classCallCheck(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,n){for(var o=0;o<n.length;o++){var t=n[o];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}function _createClass(e,n,o){return n&&_defineProperties(e.prototype,n),o&&_defineProperties(e,o),e}for(var maxSize,minSize,w,h,body=document.querySelector(".body"),canvas=document.getElementById("canvas"),wrapper=document.querySelector(".wrapper"),centrlBtn=document.querySelector(".central-btn"),rotator=document.querySelector(".rotator"),menu=document.querySelector(".menu"),circles=document.querySelector(".menu__circles"),but=document.querySelector(".menu__large-btn"),butNames=document.querySelector(".menu__names"),butLogos=document.querySelector(".menu__logos"),nav=document.querySelector(".menu__nav"),ul=document.querySelector(".menu__ul"),li=document.querySelectorAll(".menu__li"),liBut=document.querySelectorAll(".menu-li__button"),main=document.querySelector(".main"),tapfield=document.querySelector(".main__tapfield"),popup=document.querySelectorAll(".main__popup"),lazy=[],i=0;i<popup.length;i++)lazy[i]=popup[i].querySelectorAll(".popup__lazy");function Resize(){window.innerWidth<window.innerHeight?(maxSize=window.innerHeight,minSize=window.innerWidth):(maxSize=window.innerWidth,minSize=window.innerHeight),w=maxSize,h=maxSize,canvas.width=maxSize,canvas.height=maxSize,minSize<650?(li.forEach((function(e){e.classList.add("mobile")})),liBut.forEach((function(e){e.classList.add("mobile")}))):(li.forEach((function(e){e.classList.remove("mobile")})),liBut.forEach((function(e){e.classList.remove("mobile")})))}window.addEventListener("resize",Resize,!1),Resize(),function(){var e,n,o={dotsQuantity:30,dotMinRad:1,dotMaxRad:20,sphereRad:300,bigDotRad:35,mouseSize:120,massFactor:.003,firstMouseColor:"rgba(256, 0, 0, 0.3)",secondMouseColor:"rgba(256, 256, 256, 0.6)",firstColor:"rgba(256, 256, 256, 0.1)",secondColor:"rgba(256, 256, 256, 0.4)",smooth:.85},t=2*Math.PI,i=canvas.getContext("2d"),s=function(){function n(t){var i,s;_classCallCheck(this,n),this.pos={x:e.x,y:e.y},this.vel={x:0,y:0},this.rad=t||(i=o.dotMinRad,s=o.dotMaxRad,Math.random()*(s-i)+i),this.mass=this.rad*o.massFactor,this.color=o.defColor}return _createClass(n,[{key:"drawMouse",value:function(e,n){this.pos.x=e||this.pos.x+this.vel.x,this.pos.y=n||this.pos.y+this.vel.y,a(this.pos.x,this.pos.y,this.rad,!0,o.firstMouseColor),a(this.pos.x,this.pos.y,this.rad,!1,o.secondMouseColor)}},{key:"draw",value:function(e,n){this.pos.x=e||this.pos.x+this.vel.x,this.pos.y=n||this.pos.y+this.vel.y,a(this.pos.x,this.pos.y,this.rad,!0,o.firstColor),a(this.pos.x,this.pos.y,this.rad,!1,o.secondColor)}}]),n}();function a(e,n,o,s,a){i.fillStyle=i.strokeStyle=a,i.beginPath(),i.arc(e,n,o,0,t),i.closePath(),s?i.fill():i.stroke()}w=canvas.width=1*maxSize,h=canvas.height=1*maxSize,e={x:w/2,y:h/2,down:!1},(n=[]).push(new s(o.bigDotRad)),function t(){i.clearRect(0,0,w,h),n.length<o.dotsQuantity&&n.push(new s),function(){for(var t=1;t<n.length;t++){for(var i={x:0,y:0},s=0;s<n.length;s++)if(t!=s){var a=[n[t],n[s]],r=a[0],l=a[1],d={x:l.pos.x-r.pos.x,y:l.pos.y-r.pos.y},u=Math.sqrt(d.x*d.x+d.y*d.y)||1,c=(u-o.sphereRad)/u*l.mass;if(0==s){var p=o.mouseSize/u;r.color="rgba(250, 10, 30, ".concat(p,")"),c=u<o.mouseSize?(u-o.mouseSize)*l.mass:r.mass}i.x+=d.x*c,i.y+=d.y*c}n[t].vel.x=n[t].vel.x*o.smooth+i.x*n[t].mass,n[t].vel.y=n[t].vel.y*o.smooth+i.y*n[t].mass}n.map((function(o){return o==n[0]?o.drawMouse(e.x,e.y):o.draw()}))}(),window.requestAnimationFrame(t)}(),document.addEventListener("mousemove",(function(n){var o=[n.clientX,n.clientY];e.x=o[0],e.y=o[1]})),document.addEventListener("mousedown",(function(){return o.sphereRad=100})),document.addEventListener("mouseup",(function(){return o.sphereRad=300}))}(),document.addEventListener("mousemove",(function(e){var n=-(e.clientX-window.innerWidth/2)/window.innerWidth*30-7,o=(e.clientY-window.innerHeight/2)/window.innerHeight*30+7;rotator.style.transform="rotateX("+o+"deg) rotateY("+n+"deg)"}),!1),centrlBtn.addEventListener("mouseover",(function(){butNames.classList.add("menu__names--hover")}),!1),centrlBtn.addEventListener("mouseout",(function(){butNames.classList.remove("menu__names--hover")}),!1);var indexOfPopup,isOpened=!1;function centrlBtnClick(){isOpened?(but.classList.remove("menu__large-btn--opened"),butNames.classList.remove("menu__names--opened"),butLogos.classList.remove("menu__logos--opened"),circles.classList.remove("menu__circles--opened"),nav.classList.remove("menu__nav--opened"),ul.classList.remove("menu__ul--opened"),li.forEach((function(e){e.classList.remove("menu__li--opened")})),liBut.forEach((function(e){e.classList.remove("menu-li__button--opened")}))):(but.classList.add("menu__large-btn--opened"),butNames.classList.add("menu__names--opened"),butLogos.classList.add("menu__logos--opened"),circles.classList.add("menu__circles--opened"),nav.classList.add("menu__nav--opened"),ul.classList.add("menu__ul--opened"),li.forEach((function(e){e.classList.add("menu__li--opened")})),liBut.forEach((function(e){e.classList.add("menu-li__button--opened")}))),isOpened=!isOpened}function OpenPopUp(){var e=this;liBut.forEach((function(n,o){if(n===e){indexOfPopup=o,menu.classList.add("menu--hidden"),tapfield.classList.add("main__tapfield--opened"),body.classList.add("body--popup-opened"),popup[indexOfPopup].classList.add("main__popup--opened");var t=document.createElement("div");popup[indexOfPopup].prepend(t),t.classList.add("main__close"),t.innerHTML="X",t.addEventListener("click",ClosePopUp,!1),LazyPopup(indexOfPopup)}}))}function LazyPopup(e){var n=0,o=setInterval((function(){lazy[e][n].classList.add("popup__lazy--opened"),++n===lazy[e].length&&clearInterval(o)}),200)}function ClosePopUp(){menu.classList.remove("menu--hidden"),tapfield.classList.remove("main__tapfield--opened"),body.classList.remove("body--popup-opened"),popup[indexOfPopup].classList.remove("main__popup--opened"),popup[indexOfPopup].querySelector(".main__close").remove(),lazy[indexOfPopup].forEach((function(e){e.classList.remove("popup__lazy--opened")}))}centrlBtn.addEventListener("click",centrlBtnClick,!1),but.addEventListener("click",centrlBtnClick,!1),liBut.forEach((function(e){e.addEventListener("click",OpenPopUp,!1)})),tapfield.addEventListener("click",ClosePopUp,!1);